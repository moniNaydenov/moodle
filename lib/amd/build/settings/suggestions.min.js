define ("core/settings/suggestions",["exports","core/utils","core/templates","core/key_codes"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;c=function(a){if(a&&a.__esModule){return a}else{var b={};if(null!=a){for(var c in a){if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};if(d.get||d.set){Object.defineProperty(b,c,d)}else{b[c]=a[c]}}}}b.default=a;return b}}(c);function e(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function f(a){return function(){var b=this,c=arguments;return new Promise(function(d,f){var i=a.apply(b,c);function g(a){e(i,d,f,g,h,"next",a)}function h(a){e(i,d,f,g,h,"throw",a)}g(void 0)})}}var g={body:"body",currentResult:"li.bg-secondary",firstResult:"li:first-child",lastResult:"li:last-child",searchBox:"#id_query",searchLinks:".tab-pane ul li a"},h=document.querySelector(g.searchBox),i=document.querySelectorAll(g.searchLinks),j=Array.prototype.map.call(i,function(a){return{name:a.innerHTML.toLowerCase(),action:a.href,fullName:a.innerHTML}}),k=[],l=null,m={selectedResult:"bg-secondary"},n=function(){l=document.createElement("ul");l.dataset.search="result";l.style.zIndex=999999;l.classList.add("list-group");l.classList.add("bg-white");l.classList.add("position-absolute");h.parentNode.insertBefore(l,h.nextSibling);r();h.addEventListener("input",(0,b.debounce)(f(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:o();case 1:case"end":return a.stop();}}},a)})),300));h.addEventListener("keyup",q);h.addEventListener("keydown",p);l.addEventListener("keydown",p);document.querySelector(g.body).addEventListener("click",function(a){var b=a.composedPath(),c=!1;b.forEach(function(a){c=c||a instanceof HTMLElement&&a.isEqualNode(l)});if(!c&&!h.isEqualNode(a.target)){r()}})};a.init=n;var o=function(){var a=f(regeneratorRuntime.mark(function a(){var b,d,e,f;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:b=h.value.toLowerCase();l.innerHTML="";k.length=0;if(2<=b.length){j.forEach(function(a){if(a.name.includes(b)){if(!k.includes(a)){k.push(a)}}})}window.console.log(k);a.next=7;return c.renderForPromise("core/settings/settings-results-item",k);case 7:d=a.sent;e=d.html;f=d.js;c.replaceNodeContents(l,e,f);if(0===k.length){r()}else{s()}case 12:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}(),p=function(a){if(0===k.length){return}var b=l.querySelector(g.currentResult),c=null;if(a.keyCode===d.arrowDown){a.preventDefault();if(null===b){c=l.querySelector(g.firstResult)}else{c=b.nextElementSibling}}else if(a.keyCode===d.arrowUp){a.preventDefault();if(null===b){c=l.querySelector(g.lastResult)}else{c=b.previousElementSibling}}else if(a.keyCode===d.enter){if(null!==b){a.preventDefault();return}}if(null!==c){c.classList.add(m.selectedResult);if(null!==b){b.classList.remove(m.selectedResult)}}},q=function(a){var b=l.querySelector(g.currentResult);if(a.keyCode===d.arrowDown||a.keyCode===d.arrowUp){a.preventDefault()}else if(a.keyCode===d.enter){if(null!==b){a.preventDefault();window.location=b.querySelector("a").href}}},r=function(){l.classList.add("d-none")},s=function(){l.classList.remove("d-none")}});
//# sourceMappingURL=suggestions.min.js.map
