define ("core/settings/suggestions",["exports","core/utils","core/templates","core/key_codes"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;c=function(a){if(a&&a.__esModule){return a}else{var b={};if(null!=a){for(var c in a){if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};if(d.get||d.set){Object.defineProperty(b,c,d)}else{b[c]=a[c]}}}}b.default=a;return b}}(c);function e(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function f(a){return function(){var b=this,c=arguments;return new Promise(function(d,f){var i=a.apply(b,c);function g(a){e(i,d,f,g,h,"next",a)}function h(a){e(i,d,f,g,h,"throw",a)}g(void 0)})}}var g={body:"body",currentResult:"li.bg-secondary",firstResult:"li:first-child",lastResult:"li:last-child",searchBox:"#id_query",searchLinks:".tab-pane ul li a"},h={selectedResult:"bg-secondary"},i=document.querySelector(g.searchBox),j=document.createElement("ul"),k=document.querySelectorAll(g.searchLinks),l=Array.prototype.map.call(k,function(a){return{name:a.innerHTML.toLowerCase(),action:a.href,fullName:a.innerHTML}}),m=[];a.init=function init(){j.dataset.search="result";j.style.zIndex=999999;j.classList.add("list-group","bg-white","position-absolute");i.parentNode.insertBefore(j,i.nextSibling);q();s()};var n=function(){var a=f(regeneratorRuntime.mark(function a(){var b,d,e,f;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:b=i.value.toLowerCase();j.innerHTML="";m.length=0;if(!(2<=b.length)){a.next=12;break}l.forEach(function(a){if(a.name.includes(b)){if(!m.includes(a)){m.push(a)}}});m.sort(function(c,a){if(c.fullName<a.fullName){return-1}else if(c.fullName>a.fullName){return 1}return 0});a.next=8;return c.renderForPromise("core/settings/settings-results",m);case 8:d=a.sent;e=d.html;f=d.js;c.replaceNodeContents(j,e,f);case 12:if(0===m.length){q()}else{r()}case 13:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}(),o=function(a){if(0===m.length){return}var b=j.querySelector(g.currentResult),c=null;if(a.keyCode===d.arrowDown){a.preventDefault();if(null===b){c=j.querySelector(g.firstResult)}else{c=b.nextElementSibling}}else if(a.keyCode===d.arrowUp){a.preventDefault();if(null===b){c=j.querySelector(g.lastResult)}else{c=b.previousElementSibling}}else if(a.keyCode===d.enter){if(null!==b){a.preventDefault();return}}if(null!==c){c.classList.add(h.selectedResult);if(null!==b){b.classList.remove(h.selectedResult)}}},p=function(a){var b=j.querySelector(g.currentResult);if(a.keyCode===d.arrowDown||a.keyCode===d.arrowUp){a.preventDefault()}else if(a.keyCode===d.enter){if(null!==b){a.preventDefault();window.location=b.querySelector("a").href}}},q=function(){j.classList.add("d-none")},r=function(){j.classList.remove("d-none")},s=function(){i.addEventListener("input",(0,b.debounce)(f(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:n();case 1:case"end":return a.stop();}}},a)})),300));i.addEventListener("keyup",p);i.addEventListener("keydown",o);j.addEventListener("keydown",o);document.querySelector(g.body).addEventListener("click",function(a){var b=a.composedPath(),c=!1;b.forEach(function(a){c=c||a instanceof HTMLElement&&a.isEqualNode(j)});if(!c&&!i.isEqualNode(a.target)){q()}})}});
//# sourceMappingURL=suggestions.min.js.map
